<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <title>Usando una animacion</title>
    <link rel="stylesheet" href="bar.css">
  </head>
  <body>

    <div class="bar">
      <h1>Mi primera animacion</h1>
      <button type="button" name="button" class="btn-ani" onclick="mover()">Animate</button>
    </div>



    <div class="contenedor" id="conten">
      <div id="cortina">
        <div class="cuadrado" id="cuadro">
            <!--<p id="posicion">Hola</p>-->
        </div>
      </div>
    </div>

    <script type="text/javascript">
      function mover() {
        var cuadro = document.getElementById("cuadro");
        var pos = 0;
        var pos2 = -1;
        var anchura = document.getElementById("conten").clientWidth - cuadro.clientWidth;
        var altura = document.getElementById("conten").clientHeight - cuadro.clientHeight;
        var limite;
        var cortina = document.getElementById("cortina");

        if(anchura > altura){
          limite = altura;
        }else{
          limite = anchura;
        }

        var id = setInterval(rebota, 5);

        function rebota(){

          if(pos2 == 0 && pos != 0){
            pos--;
            cuadro.style.left = pos + "px";
          }

          if(pos == limite){
            pos2--;
            cuadro.style.top = pos2 + "px";
            cortina.style.height = pos2 + "px";
          }else if(pos < limite && pos2 != 0){
            pos++;
            cuadro.style.top = pos + "px";
            cuadro.style.left = pos + "px";
            //console.log("x="+pos+" y="+pos);
            //msg.innerHTML = "x="+pos+" y="+pos;
            cortina.style.height = pos + "px";
            pos2 = pos;
          }
        }
      }
    </script>

  </body>
</html>
